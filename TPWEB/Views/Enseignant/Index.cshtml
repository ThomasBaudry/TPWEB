@using GestionCegepWeb.Logics.Controleurs
@using GestionCegepWeb.Models
@model EnseignantDTO
@*Si erreur du côté serveur... affichage du message d'erreur...*@
<h3>Sélectionner un Cégep</h3>




@if (ViewBag.MessageErreur != null)
{
    <br />
    <h2 class="alert-danger">@ViewBag.MessageErreur</h2>
}
else
{
    ViewBag.ListeCegeps = CegepControleur.Instance.ObtenirListeCegep(); 
    ViewBag.ListeDepartements = CegepControleur.Instance.ObtenirListeDepartement(ViewBag.NomCegep);
    <form asp-controller="Enseignant" asp-action="Index" method="get">
        <select name="nomCegep" onchange="submit();">
            @foreach(CegepDTO cegep in ViewBag.ListeCegeps)
                {
                    if(cegep.Nom.Equals(ViewBag.NomCegep))
                    {
                        <option selected>@cegep.Nom</option>
                    }else{
                        <option>@cegep.Nom</option>
                    }
                    
                }
        </select>
     
        <select name="nomDepartement" onchange="submit();">
            @foreach(DepartementDTO departement in ViewBag.ListeDepartements)
                {
                    if(departement.Nom.Equals(ViewBag.NomDepartement))
                    {
                        <option selected>@departement.Nom</option>
                    }else{
                        <option>@departement.Nom</option>
                    }
                }
        </select>
    </form>
    @*Affichage de la liste des cégeps...*@
    <br />
    <h3>Liste des enseignant(s) (@ViewBag.ListeEnseignants.Length Enseignant(s)) :</h3>
    <br />
    <form asp-controller="" asp-action="" method="post">
        <table>
            <tr>
                <th>Numéro</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Adresse</th>
                <th>Ville</th>
                <th>Province</th>
                <th>CodePostal</th>
                <th>Telephone</th>
                <th>Courriel</th>

            </tr>
            @foreach (EnseignantDTO ens in ViewBag.ListeEnseignants)
            {
                <tr>
                    <td>@ens.NoEmploye</td>
                    <td>@ens.Nom</td>
                    <td>@ens.Prenom</td>
                    <td>@ens.Adresse</td>
                    <td>@ens.Ville</td>
                    <td>@ens.Province</td>
                    <td>@ens.CodePostal<td>
                    <td>@ens.Telephone</td>
                    <td>@ens.Courriel</td>
                    <td><input value="Modifier" onclick="document.getElementById('nomEnseignant').value ='@ens.Nom'; this.form.action='/Enseignant/FormulaireModifierEnseignant'; this.form.method='get'; submit();" type="button" /></td>

                </tr>
            }
        </table>
        <input id="nomEnseignant" name="nomEnseignant" type="hidden"/>
        <input id="nomDepartement" name="nomDepartement" type="hidden" value="@ViewBag.NomDepartement/>
        <input id="nomCegep" name="nomCegep" type="hidden" value="@ViewBag.NomCegep"/>
    </form>
     <br />
    <b>Ajouter un Enseignant : </b>
    <br />
    <br />
    <form asp-controller="Enseignant" asp-action="AjouterEnseignant" method="post">
        <input type="hidden" name="nomCegep" value="@ViewBag.NomCegep"/>
        <input type="hidden" name="nomDep" value="@ViewBag.NomDepartement"/>
        <table>
            <tr>
                <td>
                    <label asp-for="NoEmploye"></label>
                </td>
                <td>
                    <input asp-for="NoEmploye" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Nom"></label>
                </td>
                <td>
                    <input asp-for="Nom" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Prenom"></label>
                </td>
                <td>
                    <input asp-for="Prenom" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Adresse"></label>
                </td>
                <td>
                    <input asp-for="Adresse" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Ville"></label>
                </td>
                <td>
                    <input asp-for="Ville" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Province"></label>
                </td>
                <td>
                    <input asp-for="Province" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="CodePostal"></label>
                </td>
                <td>
                    <input asp-for="CodePostal" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Telephone"></label>
                </td>
                <td>
                    <input asp-for="Telephone" />
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="Courriel"></label>
                </td>
                <td>
                    <input asp-for="Courriel" />
                </td>
            </tr>
        </table>
        <input type="submit" value="Ajouter" />
    </form>
}